# Chapter6 模板实战


<!-- vim-markdown-toc GFM -->

* [6.1 包含模型](#61-包含模型)
    - [6.1.1 链接器错误](#611-链接器错误)
    - [6.1.2 头文件的模板](#612-头文件的模板)

<!-- vim-markdown-toc -->



## 6.1 包含模型

### 6.1.1 链接器错误

```c++
// a.hpp
template <typename T>
void fn(T const&)
```

```c++
// a.cpp
#include "a.hpp"

template <typename T>
void fn(T const& x)
{
    ...
}
```

```c++
// main.cpp
#include "a.hpp"

int main()
{
    double d;
    fn(d);
}
```

函数模板`fn()`的定义还没有被实例化。为了使模板真正得到实例化。为了使模板真正得到实例化，编译起必须知道：应该实例化那个定义以及要给予哪个模板实参来进行实例化。这两部分信息位于分开编译的不同文件里面。因此，当我们的编译器看到`fn()`被调用，但还没有看到基于double实例化的函数定义的时候，它只是假设在别处提供了这个定义，并产生一个指向该定义的引用（让链接器利用该引用来解决这个问题）。另一方面，当编译器处理`a.cpp`的时候，它并没有指出：编译器必须基于特定实参对所包含的模板定义进行实例化。

### 6.1.2 头文件的模板


