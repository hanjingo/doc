# 第14章 模板的多态威力

[TOC]




## 14.1 动多态

抽象基类（abstract base class, ABC）。

利用一个指向基类（子对象）的指针或者引用来调用虚成员函数，实际上将可以调用（指针或者引用实际上所代表的）具体类对象的相应成员。



## 14.2 静多态

静多态的静态特性约束：所有的类型都必须能够在编译期确定。



## 14.3 动多态和静多态

### 14.3.1 术语

动多态和静多态为不同的C++编程idioms提供了支持：

1. 通过继承实现的多态是绑定的和动态的：
   - 绑定的含义是：对于参与多态行为的类型，它们（具有多态行为）的接口是在公共基类的设计中就预先确定的。
   - 动态的含义是：接口的绑定是在运行期（动态）完成的。
2. 通过模板实现的多态是非绑定的和静态的：
   - 非绑定的含义是：对于参与多态行为的类型，它们的接口是没有预先确定的。
   - 静态的含义是：接口的绑定是在编译期（静态）完成的。

### 14.3.2 优点和缺点

C++的动多态具有下列优点：

- 能够优雅地处理异类集合。
- 可执行代码的大小通常比较小（因为只需要一个多态函数保护，但对于静多态而言，为了处理不同的类型必须生成多个不同的模板实例）。
- 可以对代码进行完全编译：因此不需要发布实现源码（但是，分发模板库通常都需要同时分发模板实现的源代码）。

C++静多态具有下列优点：

- 可以很容易地实现内建类型的集合。更广义地说，并不需要通过公共基类来表达接口的共同性。
- 所生成的代码效率通常都比较高（因为并不存在通过指针地间接调用，而且，可以进行演绎地非虚拟函数具有更多的内联机会）。
- 对于只提供部分接口的具体类型，如果在应用程序中只是使用这一部分接口，那么也可以使用该具体类型；而不必在乎该类型是否提供其他部分的接口。

### 14.3.3 组合这两种多态

基于继承地奇异递归模板模式（cuiriously recurring template pattern, CRTP）。



## 14.4 新形式的设计模板



## 14.5 泛型程序设计



## 14.6 本章后记

