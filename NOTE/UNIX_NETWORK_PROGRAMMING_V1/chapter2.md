# 第二章 传输层:TCP,UDP和SCTP
- UDP（用户数据报协议）:缺乏可靠性，不保证顺序到达也不保证到达后数据不改变；
- TCP(传输控制协议):流协议，可靠；
- SCTP(流控制传输协议):在连接之间提供多个流；而不是像tcp一样只有一个流；支持多个ip地址;

## TCP
### 三次握手
todo

### tcp选项
每一个SYN可以含有多个TCP选项。下面是常用的TCP选项:
- MSS选项。发送SYN的TCP一端使用本选项通告对端它的最大分节点大小(maximum segment size),也就是它在本连接的每个TCP分节中愿意接受的最大数据量。发送端TCP使用接收端的MSS值作为所发送分节的最大大小。
- 窗口规模选项。TCP连接任何一端能够通告对端的最大窗口大小是65535(目前更新到了1GB)，因为在TCP首部中相应的字段占16位。
- 时间戳选项。这个选项对于高速网络连接是必要的，它可以防止由失而复得的分组可能造成的数据损坏。

### tcp连接终止
todo

### tcp状态转移图
todo

### 观察分组
todo

## TIME_WAIT状态
TIME_WAIT状态有2个存在的理由:
- 可靠地实现TCP全双工连接的终止；
- 允许老的重复分节在网络中消逝；

## SCTP
### 四路握手
todo

### 关联终止
todo

### SCTP状态转移图
todo

### 观察分组
todo

## 端口号
IANA(the Internet Assigned Numbers Authority, 因特网已分配数值权威机构)维护者一个端口号分配状况的清单。端口被划分为以下3段:
- 众所周知的端口(0~1023)。这些端口由IANA分配和控制。可能的话，相同端口就分配给TCP,UDP和SCTP的同一给定服务。
- 已登记的端口(1024~49151)。这些端口不受IANA控制，不过由IANA登记并提供他们的使用情况清单，以方便整个群体。
- 动态/私用的端口(49152~65535)。俗称临时端口。

### 套接字对
一个TCP连接的套接字对(sock pair)是一个定义该连接的2个端点的四元组:本地IP地址，本地TCP端口号，外地IP地址，外地TCP端口号。套接字对唯一标识一个网络上的每个TCP连接。就SCTP而言，一个关联由一组本地IP地址，一个本地端口，一组外地IP地址，一个外地端口标识。在2个端点均非多宿这一最简单的情形下，SCTP与TCP所用的四元组套接字对一致。然而在某个关联的任何一个端点为多宿的情形下，同一个关联可能需要多个四元组标识（这些四元组的IP地址各不相同，但端口号是一样的）。

标识每个端口的2个值（IP地址和端口号）通常称为要给套接字。

## TCP端口号与并发服务器

## 缓冲区大小及限制
下面我们将介绍一些影响IP数据报大小的限制:
- IPv4数据报的最大大小是65535字节，包括IPv4首部。总长16位；
- IPv6数据包的最大大小是65575字节，包括40字节的IPv6首部。总长14位；
- 许多网络有一个可由硬件规定的MTU（最大传输单元，默认1500）；
- 在2个主机之间的路径最小的MTU称为路径MTU