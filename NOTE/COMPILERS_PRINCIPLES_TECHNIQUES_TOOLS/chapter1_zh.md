中文版 | [English](chapter1.md) 

# 第1章 引论

[TOC]



## 1.1 语言处理器



## 1.2 一个编译器的结构

编译器分为两个部分：

- 分析（analysis）部分：把源程序分解为多个组成要素，并在这些要素上加上语法结构，并使用该结构来创建该源程序的一个中间表示）。

- 综合（synthesis）部分：根据中间表示和符号表中的信息来构造用户期待的目标程序。

### 1.2.1 词法分析

编译器的第1个步骤称为词法分析（lexical analysis）或扫描（scanning）。词法分析器读入组成源程序的字符流，并且将它们组织成为有意义的词素（lexeme）的序列。

### 1.2.2 语法分析

编译器的第2个步骤称为语法分析（syntax analysis）或解析（parsing）。语法分析器使用由词法分析器生成的各个词法单元的第一个分量来创建树形的中间表示。该中间表示给出了词法分析产生的词法单元流的语法结构。

### 1.2.3 语义分析

语义分析器（semantic analyzer）使用语法树和符号表中的信息来检查源程序是否和语言定义的语义已知。它同时也手机类型信息，并把这些信息存放在语法树或符号表中，以便在随后的中间代码生成过程中使用。

### 1.2.4 中间代码生成

三地址代码（three-address code）。

### 1.2.5 代码优化

### 1.2.6 代码生成

代码生成器以源程序的中间表示形式作为输入，并把它映射到目标语言。

### 1.2.7 符号表管理

符号表数据结构为每个变量名字创建了一个记录条目。记录的字段就是名字的各个属性。

### 1.2.8 将多个步骤组合成趟

可以把一个前端和不同的目标机后端结合，建立针对不同目标机的编译器。

### 1.2.9 编译器构造工具

一些常用的编译器构造工具包括：

1. 语法分析器的生成器：根据一个程序设计语言的语法描述自动生成语法分析器。

2. 扫描器的生成器：根据一个语法的语法单元的正则表达式描述生成词法分析器。

3. 语法制导的翻译引擎：生成一组用于遍历分析树并生成中间代码的例程。

4. 代码生成器的生成器：依据一组关于如何把中间语言的每个运算翻译成目标机上的机器语言的规则，生成一个代码生成器。

5. 数据流分析引擎：帮助手机数据流信息，即程序中的值如何从程序的一个部分传递到另一部分。

6. 编译器构造工具集：提供了可用于构造编译器的不同阶段的例程的完整集合。



## 1.3 程序设计语言的发展历程

### 1.3.1 走向高级程序设计语言

### 1.3.2 对编译器的影响



## 1.4 构建一个编译器的相关科学

### 1.4.1 编译器设计和实现中的建模

### 1.4.2 代码优化的科学

编译器优化必须满足下面的设计目标：

- 优化必须是正确的，也就是说，不能改变被编译程序的含义。

- 优化必须能够改善很多程序的性能。

- 优化所需的时间必须保持在合理的范围内。

- 所需要的工程方面的工作必须是可管理的。



## 1.5 编译技术的应用

### 1.5.1 高级程序设计语言的实现

一个高级程序设计语言定义了一个编程抽象：程序员使用这个语言表达算法，而编译器必须把这个程序翻译成目标语言。

面向对象的主要思想：

1. 数据抽象
2. 特性的继承

### 1.5.2 针对计算机体系结构的优化

几乎所有的高性能系统都利用了两种技术：

- 并行（parallelism）
- 内存层次结构（memory hierarchy）

### 1.5.3 新计算机体系结构的设计

- RISC
- 专用体系结构

### 1.5.4 程序翻译

- 二进制翻译
- 硬件合成
- 数据查询解释器
- 编译然后模拟

### 1.5.5 软件生产率工具

- 类型检查

  是一种有效的，且被充分研究的技术，它可以被用于捕捉程序中的不一致性。

- 边界检查

- 内存管理工具



## 1.6 程序设计语言基础

### 1.6.1 静态和动态的区别

- 静态策略：在编译时刻做出决定的策略。
- 动态策略：只允许在运行程序的时候做出决定的策略。

### 1.6.2 环境与状态

名字和内存（存储）位置的关联，及之后和值的关联可以用两个映射来描述。这两个映射随着程序的运行而改变：

- 环境：一个从名字到存储位置的映射。
- 状态：一个从内存位置到它们的值的映射。

### 1.6.3 静态作用域和块结构

在C语言中，有关块的语法如下：

1. 块是一种语句。块可以出现在其它类型的语句（比如赋值语句）所能够出现的任何地方。
2. 一个块包含了一个声明的序列，然后再跟着一个语句序列。这些声明和语句用一对括号包围起来。

### 1.6.4 显式访问控制

### 1.6.5 动态作用域

动态作用域：对一个名字$x$的使用指向的是最近被调用但还没有终止且声明了$x$的过程中的这个声明。

### 1.6.6 参数传递机制

在值调用中，会对实在参数求值（如果它是表达式）或拷贝（如果它是变量）。这些值被放在属于被调用过程的相应形式参数的内存位置上。

在引用调用中，实在参数的地址作为相应的形式参数的值被传递给被调用者。在被调用者的代码中使用形式参数时，实现方法是沿着这个指针找到调用者指明的内存位置。

在名调用中，它要求被调用者的运行方式好像是用实在参数以字面方式替换了被调用者的代码中的形式参数一样。

### 1.6.7 别名



## 1.7 总结



## 1.8 参考文献

