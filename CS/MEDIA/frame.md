# I帧 P帧 B帧

[TOC]

## I帧

关键帧,一帧画面的完整保留;解码时只需要本帧数据就可以完成; 
通常是每个GOP的第一帧,采用帧内压缩法压缩,基于离散余弦变换DCT（Discrete Cosine Transform）的压缩技术，这种算法与JPEG压缩算法类似。采用I帧压缩可达到1/6的压缩比而无明显的压缩痕迹。  

### 特点
1. 它是一个全帧压缩编码帧。它将全帧图像信息进行JPEG压缩编码及传输;
2. 解码时仅用I帧的数据就可重构完整图像;
3. I帧描述了图像背景和运动主体的详情;
4. I帧不需要参考其他画面而生成;
5. I帧是P帧和B帧的参考帧(其质量直接影响到同组中以后各帧的质量);
6. I帧是帧组GOP的基础帧(第一帧),在一组中只有一个I帧;
7. I帧不需要考虑运动矢量;
8. I帧所占数据的信息量比较大。



## P帧

差别帧,表示这一帧跟之前的一个i帧/p帧的差别;没有完整画面数据,解码时需要用之前缓存的画面叠加上本帧定义的差别,生成最终画面; 
通过充分降低于图像序列中前面已经编码帧的时间冗余信息来压缩传输数据量的编码图像,也叫预测帧; 
P帧是以I帧为参考帧,在I帧中找出P帧“某点”的预测值和运动矢量,取预测差值和运动矢量一起传送。在接收端根据运动矢量从I帧中找出P帧“某点”的预测值并与差值相加以得到P帧“某点”样值,从而可得到完整的P帧。  

### 特点
1. P帧是I帧后面相隔1-2帧的编码帧。  
2. P帧采用运动补偿的方法传送它与前面的I或P帧的差值及运动矢量（预测误差）。  
3. 解码时必须将I帧中的预测值与预测误差求和后才能重构完整的P帧图像。  
4. P帧属于前向预测的帧间编码。它只参考前面最靠近它的I帧或P帧。  
5. P帧可以是其后面P帧的参考帧，也可以是其前后的B帧的参考帧。
6. 由于P帧是参考帧，它可能造成解码错误的扩散。 
7. 由于是差值传送，P帧的压缩比较高。



## B帧

双向差别帧,表示本帧与前后帧的差别;解码时,不仅要取得之前缓存的画面,还要解码之后的画面,通过前后画面与本帧数据的叠加取得最终的画面;仅记录本帧与前后帧的差值;压缩率高，但是解码消耗的cpu较大; 
B帧以前面的I或P帧和后面的P帧为参考帧,“找出”B帧“某点”的预测值和两个运动矢量,并取预测差值和运动矢量传送。接收端根据运动矢量在两个参考帧中“找出(算出)”预测值并与差值求和,得到B帧“某点”样值,从而可得到完整的B帧;  

### 特点
1. B帧是由前面的I或P帧和后面的P帧来进行预测的;
2. B帧传送的是它与前面的I或P帧和后面的P帧之间的预测误差及运动矢量;
3. B帧是双向预测编码帧;
4. B帧压缩比最高,因为它只反映2参考帧间运动主体的变化情况,预测比较准确;
5. B帧不是参考帧,不会造成解码错误的扩散。



# 编码流程:

### i帧编码流程
1. 进行帧内预测，决定所采用的帧内预测模式。
2. 像素值减去预测值，得到残差。
3. 对残差进行变换和量化。
4. 变长编码和算术编码。
5. 重构图像并滤波，得到的图像作为其它帧的参考帧。

### p帧和b帧的编码流程
1. 进行运动估计，计算采用帧间编码模式的率失真函数(节)值。P 帧 只参考前面的帧，B 帧可参考后面的帧。
2. 进行帧内预测，选取率失真函数值最小的帧内模式与帧间模式比较，确定采用哪种编码模式。
3. 计算实际值和预测值的差值。
4. 对残差进行变换和量化。
5. 若编码，如果是帧间编码模式，编码运动矢量。

i帧是随机的,p帧和b帧必须位于i帧之后;并严格按照算法顺序排列;



# 效率对比

* 压缩率: B帧(50) > P帧(20) > I帧(7)