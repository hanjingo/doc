[TOC]

# c++的虚函数



## 调用

从语法上讲，构造函数和析构函数都可以调用虚函数，但是<<effective c++>>**不建议**，因为往往达不到目的。

1. 如果构造函数中有虚函数，此时子类还没有构造，所以此时的对象还是父类，不会触发多态。
2. 子类先进行析构，如果有虚函数的话，由于子类已经被析构了，所以会执行父类的虚函数。

### 哪些函数不能是虚函数

- 构造函数：构造时，基类指针无法知道子类的具体类型
- 内联成员函数：内联函数是在编译期展开，虚函数式运行时绑定
- 静态成员函数：静态成员函数是编译期确定的，不支持多态
- 友元函数：不属于类成员函数，不能被继承
- 普通函数：普通函数无法被继承



## 虚析构函数

### 用途

- 防止内存泄漏



## 纯虚函数

纯虚函数是在基类中声明的虚函数，它在基类中没有定义，但要求任何派生类都要定义自己的实现方法。

```c++
virtual func() = 0;
```

### 用途

1. 方便多态
2. 不允许基类生成对象

